import{r as p,C,j as a}from"./index-BEikowkj.js";import{u as S,E}from"./Expander-CcOPquLQ.js";import"./FetchData-NZ4os8me.js";const M="_wrapper_553vg_1",P="_doubleRangeContainer_553vg_19",I="_rangeSlider_553vg_29",N="_rangeSelected_553vg_41",w="_rangeInput_553vg_59",F="_rangePrice_553vg_123",m={wrapper:M,doubleRangeContainer:P,rangeSlider:I,rangeSelected:N,rangeInput:w,rangePrice:F},A=S(),B=()=>{const g=p.useRef(null),r=p.useRef(null),c=p.useRef(null),i=p.useRef(null),o=p.useRef(null),[t,R]=p.useState({min:0,max:0}),[j,G]=p.useState(""),{state:l,dispatch:d}=p.useContext(C);let x=100;const _=(s,e)=>{const n=s/c.current.max*100+"%";g.current.style.left=n;const u=100-e/r.current.max*100+"%";g.current.style.right=u},b=(s,e)=>{c.current.min=s,c.current.max=e,c.current.value=s,r.current.max=e,r.current.min=s,r.current.value=e,o.current.value=s,i.current.value=e},v=async s=>{try{const e=await A(s,"price"),n=Math.min(...e),u=Math.max(...e);d({type:"test_update",payload:{app:{...l.app,price_range:{defMax:u,defMin:n,max:u,min:n}}}}),b(n,u),_(n,u),R({min:n,max:u})}catch{v("http://api.valantis.store:40000/")}},f=s=>{let e=parseInt(c.current.value),n=parseInt(r.current.value);n-e<x?s.target.name==="min"?c.current.value=n-x:r.current.value=e+x:(o.current.value=e,i.current.value=n,d({type:"test_update",payload:{app:{...l.app,price_range:{...l.app.price_range,max:n,min:e}}}})),_(e,n)},h=s=>{let e=o.current.value,n=i.current.value;n-e<x||(c.current.value=e,r.current.value=n,d({type:"test_update",payload:{app:{...l.app,price_range:{...l.app.price_range,max:n,min:e}}}}),_(e,n))},y=s=>{let e=o.current.value,n=i.current.value;(e<t.min||e>t.max)&&(c.current.value=t.min,o.current.value=t.min,d({type:"test_update",payload:{app:{...l.app,price_range:{...l.app.price_range,max:n,min:t.min}}}})),(n>t.max||n<t.min)&&(r.current.value=t.max,i.current.value=t.max,d({type:"test_update",payload:{app:{...l.app,price_range:{...l.app.price_range,max:t.max,min:e}}}}))};return p.useEffect(()=>{v("https://api.valantis.store:41000/")},[]),a.jsxs("div",{className:m.wrapper,children:[r&&c&&a.jsxs("div",{className:m.doubleRangeContainer,children:[a.jsx("div",{className:m.rangeSlider,children:a.jsx("span",{ref:g,className:m.rangeSelected})}),a.jsxs("div",{className:m.rangeInput,children:[a.jsx("input",{type:"range",name:"min",ref:c,onChange:f,step:"1"}),a.jsx("input",{type:"range",name:"max",ref:r,onChange:f,step:"1"})]}),a.jsxs("div",{className:m.rangePrice,children:[a.jsx("label",{htmlFor:"min",children:"От"}),a.jsx("input",{ref:o,onChange:h,onBlur:y,placeholder:t.min,type:"number",name:"min"}),a.jsx("label",{htmlFor:"max",children:"До"}),a.jsx("input",{ref:i,onChange:h,onBlur:y,placeholder:t.max,type:"number",name:"max"})]})]}),j]})},V="_doubleRangeExpander_1p8ei_1",D={doubleRangeExpander:V},k=g=>{const{Header:r}=g;return a.jsx(E,{Header:r,className:D.doubleRangeExpander,children:a.jsx(B,{})})};export{k as default};
